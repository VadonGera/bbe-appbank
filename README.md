# Консольное банковское приложение.
### _или мой первый проект на Python._  

Настоящий проект на базе банковского приложения демонстрирует основные навыки, полученные 
разработчиком на первом этапе обучения: работа  со списками и словарями, 
использование циклов, функций и генераторов. 
В приложении реализованы множественные аккаунты, их создание, сохранение
и восстановление данных из файла. Работа с лог-файлом. Хеширование данных. 
Основы Git, GitHub, Unit-тестирование.

### Задачи приложения
1. Создание аккаунта или его восстановление после сохранения.
2. Пополнение и снятие средств со счета. Вывод баланса на экран. Установка лимита на счет.
3. Работа с ожидаемыми пополнениями. Создание транзакции. Статистика, вывод списка ожидаемых транзакция. Фильтрация списка. Выполнение групповых транзакций с учетом лимита.
4. Работа с отложенными платежами. Создание платежа. Вывод списка отложенных платежей. Проводка платежей.

### Структура данных
Данные об аккаунтах хранятся в файле `data.txt` и при запуске приложения
преобразуются к формату словаря:

```python
data_dict = {'account': ['name', year, balance, limit, [transactions], [payments]]}
```
где: `'account'` - логин пользователя; `'name'` - имя пользователя; `year` - год рождения;
`balance` - баланс счета пользователя; `limit` - ограничение пользователя на применение транзакций; 

`[transactions]` список транзакций в формате списка:
```python
        [summa_transaction_1, 'note_1', status_trans_1],
        [summa_transaction_2, 'note_2', status_trans_2],
        [summa_transaction_..., 'note_...', status_trans_...]
```
где: `summa_transaction` и `'note'` соотсветственно сумма и наименование транзакции,
`status_trans` - флаг выполнения транзакции (0 - не выполнена, 1 - выполнена);

`[payments]` список платежей в формате списка:
```python
        [summa_payment_1, 'account_pay_1', status_pay_1],
        [summa_payment_2, 'account_pay_2', status_pay_2],
        [summa_payment_..., 'account_pay_...', status_pay_...]
```
где: `summa_payment` и `'account_pay'` соответственно сумма и получатель платежа, 
`status_pay` - флаг выполнения (0 - платеж отложен, 1 - выполнен)

### Функционал и реализация
При запуске приложения, пользователю предлагается в главном меню сделать выбор:
- Восстановить данные аккаунта.
- Создать новый аккаунт. 
- Выход из приложения.

1. _Восстановление_. Если файл данных отсутствует, приложение завершает свою работу 
с предуприждением. Пользователю необходимо ввести логин и пароль.
Если логин в базе отсутствует, выход в главное меню. Если пароль не верный, выход в главное меню. 
Отклик приложения на все действия пользователя на всех этапах работы приложения сопровождается комментариями.
2. _Создать_. Пользователю предлагается создать новый аккаунт. Если введен аккаунт, который уже есть в базе, 
предупреждение о дубле и переход в главное меню. Далее ввод персональных данных: ФИО и год рождения и создание пароля. 
Реализован механизм хеширования пароля на основе функции `hash_password(a)` и хранение хеша в отдельном файле 
`login.passwordhash.txt`.
3. _Выход_ из приложения. Завершение работы приложения.

После восстановления или создания аккаунта пользователь поподает в основное меню. 
- Положить деньги на счет.
- Снять деньги.
- Вывести баланс на экран.
- Установить лимит на счет.
- Операции с ожидаемыми пополнениями.
- Операции с отложенными платежами.
- Выход из приложения.

1. _Положить деньги_. Запрос на сумму пополнения. В приложении реализован механизм проверки 
на ввод числового значения, который сообщает об ошибке, не прерывая выполнения программы. 
В некоторых случаях предлагается ввести `0` для отмены операции. Если у аккаунта есть отложенные платежи, то 
при пополнении счета, пользователю будет предложено провести отложенные платежи.
Этот механизм будет описан в пункте "Операции с отложенными платежами".
2. _Снять деньги_. Предлагается указать размер денежных средств для снятия. 
Здесь и далее во всех частях приложения, где операции связаны со списанием денежных средств, 
будет запрашиваться пароль на выполнение операции.
3. _Вывести баланс_. После ввода пароля выводится баланс счета.
4. _Установить лимит_. Запрос на изменение величины лимита.
5. _Операции с ожидаемыми пополнениями_. Переход в отдельное меню для работы с ожидаемыми пополнениями.
6. _Операции с отложенными платежами_. Переход в отдельное меню для работы с ожидаемыми пополнениями.
7. _Выход_ из приложения. Завершение работы приложения.

Меню для работы с ожидаемыми пополнениями.
- Запись ожидаемой транзакции (пополнения).
- Выполнить транзакции.
- Статистика по ожидаемым пополнениям.
- Фильтр по ожидаемым пополнениям.
- Вернуться в основное меню.

1. _Запись транзакции_. После ввода суммы и описания транзакции, выводится сообщение о количестве ожидаемых
транзакций у пользователя.
2. _Выполнить транзакции_. Выполняются все ожидаемые транзакции, не выполненные ранее
`status_trans == 0`, при условии, что баланс счета `balance` не превысит установленный лимит 
`limit` при выполении транзакции. В консоль выводится список транзакций со статусом применения.
3. Статистика. На экран выводится все ожидаемые транзакции пользователя, 
сгруппированные по наименованию `note` с указанием общего количества транзакций 
в группе и суммы этих транзакций.
4. _Фильтр_ по ожидаемым пополнениям. В консоль выводится список всех ожидаемых транзакций пользователя,
сумма которых больше, указанной пользователем.
5. _Вернуться_ в основное меню. Возврат в основное меню.

Меню для работы с отложенными платежами.
- Создать платеж.
- Список отложенных платежей.
- Провести отложенные платежи.
- Вернуться в основное меню.

1. _Создать_ платеж. Запрос аккаунта получателя `account_pay`. Если введенный аккаунт не зарегистрирован в системе, 
операция отклоняется с возвратом в текущее меню. Провести платеж самому себе не допускается. 
Далее запрос суммы платежа `summa_payment`. Если сумма платежа меньше текущего баланса `balance`, 
то выводится запрос на проведение этого платежа.
2. _Список_ отложенных платежей. В консоль выводится список отложенных платежей (`status_pay == 0`).
3. _Провести_ отложенные платежи. Выполняется групповая операция проведения отложенных платежей 
пользователя, реализованная через генератор `make_payments(user_account, data_dict)`. 
При выполении проверяется регистрация аккаунта получателя `account_pay` в системе, статус платежа
(`status_pay == 0`) и баланс `balance` пользователя для списания суммы платежа `summa_payment`. 
При выполнении этих условий сумма платежа списывается со счета пользователя и 
зачисляется на счет получателя с уведомлением в консоль.
Во всех остальных случаях по каждому отложенному платежу в консоль выводится 
соответствующее сообщение. 
4. _Вернуться_ в основное меню. Возврат в основное меню.


После выполнения каждой операции, результат выполнения сохраняетя в файле данных `data.txt`
 через функцию `file_save(name_file, data_dict)`. 
Статус выполнения операции фиксируется 
в `log.txt` через функцию `log_file(name, result)`. 
Проверка на ввод числового значения
реализована через функцию `input_int(input_text)`.

